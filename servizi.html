<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Servizi - Studio Professionale Associato</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Studio Professionale Associato</h1>
        <p>Dott.ssa Grazia Sirica Dott. Enrico Sirica</p>
    </header>
    <div class="menu-toggle" onclick="toggleMenu()">Menu</div>
    <nav>
        <ul id="menu">
            <li><a href="index.html">Home</a></li>
            <li><a href="chi-siamo.html">Chi Siamo</a></li>
            <li><a href="servizi.html">Servizi</a></li>
            <li><a href="testimonianze.html">Testimonianze</a></li>
            <li><a href="contatti.html">Contatti</a></li>
            <li><a href="prenota.html">Prenota Consulenza</a></li>
        </ul>
    </nav>
    <section id="servizi" class="services">
        <h2>Servizi</h2>
        <ul>
            <li>
                <h3>Contabilità</h3>
                <p>Gestione completa della contabilità aziendale, inclusi registrazioni contabili, bilanci, e consulenza fiscale per ottimizzare la gestione economica dell'impresa.</p>
                <img src="business4.jpg" alt="Contabilità" class="service-image">
                <button onclick="toggleNews('news-contabilita')">Ultime Notizie</button>
                <div class="news" id="news-contabilita" style="display: none;">
                    <h4>Ultime Notizie</h4>
                    <ul></ul>
                </div>
            </li>
            <li>
                <h3>Buste Paga</h3>
                <p>Elaborazione accurata delle buste paga, gestione contributi e adempimenti fiscali legati ai dipendenti, garantendo il rispetto delle normative vigenti.</p>
                <img src="business5.jpg" alt="Buste Paga" class="service-image">
                <button onclick="toggleNews('news-buste-paga')">Ultime Notizie</button>
                <div class="news" id="news-buste-paga" style="display: none;">
                    <h4>Ultime Notizie</h4>
                    <ul></ul>
                </div>
            </li>
            <li>
                <h3>CAF</h3>
                <p>Assistenza completa per la compilazione e l'invio delle dichiarazioni dei redditi, ISEE, e altri adempimenti fiscali per privati e famiglie.</p>
                <img src="business6.jpg" alt="CAF" class="service-image">
                <button onclick="toggleNews('news-caf')">Ultime Notizie</button>
                <div class="news" id="news-caf" style="display: none;">
                    <h4>Ultime Notizie</h4>
                    <ul></ul>
                </div>
            </li>
            <li>
                <h3>Patronato</h3>
                <p>Servizi di patronato per la tutela sociale, tra cui pratiche di pensione, disoccupazione, e supporto per prestazioni assistenziali e previdenziali.</p>
                <img src="business7.jpg" alt="Patronato" class="service-image">
                <button onclick="toggleNews('news-patronato')">Ultime Notizie</button>
                <div class="news" id="news-patronato" style="display: none;">
                    <h4>Ultime Notizie</h4>
                    <ul></ul>
                </div>
            </li>
            <li>
                <h3>Finanza Agevolata</h3>
                <p>Consulenza e assistenza per l'accesso a finanziamenti agevolati, contributi a fondo perduto, e incentivi fiscali per supportare lo sviluppo e la crescita delle imprese.</p>
                <img src="business8.jpg" alt="Finanza Agevolata" class="service-image">
                <button onclick="toggleNews('news-finanza-agevolata')">Ultime Notizie</button>
                <div class="news" id="news-finanza-agevolata" style="display: none;">
                    <h4>Ultime Notizie</h4>
                    <ul></ul>
                </div>
            </li>
        </ul>
    </section>
    <footer>
        <p>&copy; 2024 Studio Professionale Associato. Tutti i diritti riservati.</p>
    </footer>
    <script>
        function toggleMenu() {
            var menu = document.getElementById('menu');
            menu.classList.toggle('show');
        }

        function toggleNews(newsId) {
            var newsDiv = document.getElementById(newsId);
            if (newsDiv.style.display === 'none') {
                newsDiv.style.display = 'block';
            } else {
                newsDiv.style.display = 'none';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            let sections = document.querySelectorAll('section');

            function revealSections() {
                let scrollPosition = window.scrollY + window.innerHeight;
                sections.forEach(section => {
                    if (scrollPosition > section.offsetTop + section.offsetHeight / 4) {
                        section.classList.add('visible');
                    } else {
                        section.classList.remove('visible');
                    }
                });
            }

            window.addEventListener('scroll', revealSections);
            revealSections();

            const menuButton = document.querySelector('.menu-toggle');
            const nav = document.querySelector('nav');

            if (menuButton && nav) {
                menuButton.addEventListener('click', function() {
                    nav.classList.toggle('show');
                });

                document.addEventListener('click', function(event) {
                    if (!nav.contains(event.target) && !menuButton.contains(event.target)) {
                        nav.classList.remove('show');
                    }
                });
            }
        });

        const apiKey = '1c89f07f1b87491cba2f25daf15cdfea';
        const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
        const services = [
            {id: 'news-contabilita', query: 'contabilità Campania'},
            {id: 'news-buste-paga', query: 'buste paga Campania'},
            {id: 'news-caf', query: 'CAF Campania'},
            {id: 'news-patronato', query: 'patronato Campania'},
            {id: 'news-finanza-agevolata', query: 'finanza agevolata Campania'}
        ];

        function fetchNews(service) {
            console.log(`Fetching news for ${service.query}`);
            fetch(`${proxyUrl}https://newsapi.org/v2/everything?q=${service.query}&apiKey=${apiKey}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log(data);
                    const newsList = document.getElementById(service.id).querySelector('ul');
                    newsList.innerHTML = '';
                    if (data.articles && data.articles.length > 0) {
                        data.articles.slice(0, 3).forEach(article => {
                            const listItem = document.createElement('li');
                            listItem.innerHTML = `<a href="${article.url}" target="_blank">${article.title}</a>`;
                            newsList.appendChild(listItem);
                        });
                    } else {
                        newsList.innerHTML = '<li>Nessuna notizia trovata</li>';
                    }
                })
                .catch(error => {
                    console.error('Error fetching news:', error);
                    const newsList = document.getElementById(service.id).querySelector('ul');
                    newsList.innerHTML = '<li>Errore nel caricamento delle notizie</li>';
                });
        }

        services.forEach(service => fetchNews(service));
    </script>
</body>
</html>
